(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){},153:function(e,t,a){},174:function(e,t,a){e.exports=a(366)},179:function(e,t,a){},181:function(e,t,a){},233:function(e,t,a){},308:function(e,t,a){},310:function(e,t,a){},315:function(e,t,a){},366:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(11),i=a.n(o),r=(a(179),a(18)),l=a(19),c=a(23),u=a(20),h=a(24),d=a(60),m=a(367),p=(a(181),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=a.handleInputChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleInputChange",value:function(e){var t=this.refs.title.value;this.props.onChange({title:t,content:""})}},{key:"render",value:function(){return s.a.createElement("form",{className:"InputForm"},s.a.createElement("label",null,s.a.createElement("input",{className:"Inputstyle",name:"title",ref:"title",placeholder:"  \u6dfb\u52a0 Todo",style:{maxWidth:200},value:this.props.content,onKeyPress:this.submit.bind(this),onChange:this.handleInputChange})),s.a.createElement(m.a,{onClick:this.submit2.bind(this)},"\u6dfb\u52a0"))}},{key:"submit",value:function(e){if("Enter"===e.key){e.preventDefault();var t=this.refs.title.value;this.props.onSubmit({title:t,content:""})}}},{key:"submit2",value:function(e){e.preventDefault();var t=this.refs.title.value;this.props.onSubmit({title:t,content:""})}},{key:"changeTitle",value:function(e){this.props.onChange(e)}}]),t}(n.Component)),f=a(369),g=a(373),v=a(51),b=(a(233),a(153)),y=a.n(b),w=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){y.a.changeColor;return s.a.createElement("div",{className:"TodoItem"},s.a.createElement(f.a,{title:s.a.createElement(g.a,{checked:"completed"===this.props.todo.status,onChange:this.toggle.bind(this)},"\u5df2\u5b8c\u6210"),extra:s.a.createElement(v.a,{type:"delete",theme:"outlined",onClick:this.delete.bind(this)}),style:{width:186}},s.a.createElement("p",{className:"completed"===this.props.todo.status?"changeColor":""},this.props.todo.title)))}},{key:"toggle",value:function(e){this.props.onToggle(e,this.props.todo)}},{key:"delete",value:function(e){this.props.onDelete(e,this.props.todo)}}]),t}(n.Component),E=a(124),S=a(15),O=a.n(S);O.a.init({appId:"RPWGaqvaJi7fUh3HBoT6TqP4-gzGzoHsz",appKey:"520Y7aeHCJycPnBzxymEb2Ya"});O.a;var C={getByUser:function(e,t,a){var n=new O.a.Query("Todo");n.equalTo("deleted",!1),n.find().then(function(e){var a=e.map(function(e){return Object(E.a)({id:e.id},e.attributes)});t.call(null,a)},function(e){a&&a.call(null,e)})},create:function(e,t,a){var n=e.status,s=e.title,o=e.content,i=e.deleted,r=new(O.a.Object.extend("Todo"));r.set("title",s),r.set("content",o),r.set("status",n),r.set("deleted",i);var l=new O.a.ACL;l.setPublicReadAccess(!1),l.setWriteAccess(O.a.User.current(),!0),l.setReadAccess(O.a.User.current(),!0),r.setACL(l),r.save().then(function(e){t.call(null,e.id)},function(e){a&&a.call(null,e)})},update:function(e,t,a){var n=e.id,s=e.title,o=e.status,i=e.deleted,r=O.a.Object.createWithoutData("Todo",n);void 0!==s&&r.set("title",s),void 0!==o&&r.set("status",o),void 0!==i&&r.set("deleted",i),r.save().then(function(e){t&&t.call(null)},function(e){return a&&a.call(null,e)})},destroy:function(e,t,a){C.update({id:e,deleted:!0},t,a)}};function k(){var e=O.a.User.current();return e?N(e):null}function N(e){return Object(E.a)({id:e.id},e.attributes)}var j=a(368),I=a(370),U=(a(103),function(e){return s.a.createElement(j.a,{className:"signUp",onSubmit:e.onSubmit.bind(this)}," ",s.a.createElement("div",{className:"row"},s.a.createElement(I.a,{type:"text",value:e.formData.email,onChange:e.onChange.bind(null,"email"),prefix:s.a.createElement(v.a,{type:"email",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"})),s.a.createElement("div",{className:"row"},s.a.createElement(I.a,{type:"text",value:e.formData.username,maxLength:"10",onChange:e.onChange.bind(null,"username"),prefix:s.a.createElement(v.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username \u9650\u523610\u4e2a\u5b57\u7b26"})),s.a.createElement("div",{className:"row"},s.a.createElement(I.a,{type:"password",value:e.formData.password,onChange:e.onChange.bind(null,"password"),prefix:s.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Password"})),s.a.createElement("div",{className:"row actions"},s.a.createElement(m.a,{type:"primary",htmlType:"submit"},"\u6ce8\u518c")))}),D=function(e){return s.a.createElement(j.a,{className:"signIn",onSubmit:e.onSubmit}," ",s.a.createElement("div",{className:"row"},s.a.createElement(I.a,{type:"text",value:e.formData.username,onChange:e.onChange.bind(null,"username"),prefix:s.a.createElement(v.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"})),s.a.createElement("div",{className:"row"},s.a.createElement(I.a,{type:"password",value:e.formData.password,onChange:e.onChange.bind(null,"password"),prefix:s.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Password"})),s.a.createElement("div",{className:"row actions"},s.a.createElement(m.a,{type:"submit",htmlType:"submit"},"\u767b\u5f55")),s.a.createElement("div",{className:"text"},s.a.createElement("a",{href:"#",onClick:e.onForgotPassword},"\u5fd8\u8bb0\u5bc6\u7801\u4e86\uff1f")))},T=a(372),P=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={selected:"signUp"},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"switch",value:function(e){this.setState({selected:e.target.value})}},{key:"render",value:function(){return s.a.createElement("div",{className:"signInOrSignUp"},s.a.createElement("nav",null,s.a.createElement("label",null,s.a.createElement(T.a,{type:"radio",value:"signUp",checked:"signUp"===this.state.selected,onChange:this.switch.bind(this)})," \u6ce8\u518c"),s.a.createElement("label",null,s.a.createElement(T.a,{type:"radio",value:"signIn",checked:"signIn"===this.state.selected,onChange:this.switch.bind(this)})," \u767b\u5f55")),s.a.createElement("div",{className:"panes"},"signUp"===this.state.selected?s.a.createElement(U,{formData:this.props.formData,onSubmit:this.props.onSignUp,onChange:this.props.onChange}):null,"signIn"===this.state.selected?s.a.createElement(D,{formData:this.props.formData,onChange:this.props.onChange,onSubmit:this.props.onSignIn,onForgotPassword:this.props.onForgotPassword}):null))}}]),t}(n.Component),x=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"forgotPassword"},s.a.createElement("h3",null,"\u91cd\u7f6e\u5bc6\u7801"),s.a.createElement(j.a,{className:"forgotPassword",onSubmit:this.props.onSubmit}," ",s.a.createElement("div",{className:"row"},s.a.createElement(I.a,{type:"text",value:this.props.formData.email,onChange:this.props.onChange.bind(null,"email"),prefix:s.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"})),s.a.createElement("div",{className:"row actions"},s.a.createElement(m.a,{type:"submit",htmlType:"submit"},"\u53d1\u9001\u91cd\u7f6e\u90ae\u4ef6")),s.a.createElement("div",{className:"text"},s.a.createElement("a",{href:"#",onClick:this.props.onSignIn},"\u8fd4\u56de\u767b\u5f55"))))}}]),t}(n.Component),J=(a(308),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={selectedTab:"signInOrSignUp",formData:{username:"",password:""}},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"signUp",value:function(e){var t=this;e.preventDefault();var a=this.state.formData;!function(e,t,a,n,s){var o=new O.a.User;o.setUsername(t),o.setPassword(a),o.setPassword(e),o.signUp().then(function(e){var t=N(e);n.call(null,t)},function(e){s.call(null,e)})}(a.email,a.username,a.password,function(e){t.props.onSignUp.call(null,e)},function(e){switch(e.code){case 202:alert("\u7528\u6237\u540d\u5df2\u88ab\u5360\u7528");break;default:alert(e)}}),window.location.reload()}},{key:"signIn",value:function(e){var t=this;e.preventDefault();var a=this.state.formData;!function(e,t,a,n){O.a.User.logIn(e,t).then(function(e){var t=N(e);a.call(null,t)},function(e){n.call(null,e)})}(a.username,a.password,function(e){t.props.onSignIn.call(null,e)},function(e){switch(e.code){case 210:alert("\u7528\u6237\u540d\u4e0e\u5bc6\u7801\u4e0d\u5339\u914d");break;default:alert(e)}}),window.location.reload()}},{key:"changeFormData",value:function(e,t){var a=JSON.parse(JSON.stringify(this.state));a.formData[e]=t.target.value,this.setState(a),console.log(a)}},{key:"render",value:function(){return s.a.createElement("div",{className:"UserDialog-Wrapper"},s.a.createElement("div",{className:"UserDialog"},"signInOrSignUp"===this.state.selectedTab?s.a.createElement(P,{formData:this.state.formData,onSignIn:this.signIn.bind(this),onSignUp:this.signUp.bind(this),onChange:this.changeFormData.bind(this),onForgotPassword:this.showForgotPassword.bind(this)}):s.a.createElement(x,{formData:this.state.formData,onSubmit:this.resetPassword.bind(this),onChange:this.changeFormData.bind(this),onSignIn:this.returnToSignIn.bind(this)})))}},{key:"showForgotPassword",value:function(){var e=JSON.parse(JSON.stringify(this.state));e.selectedTab="forgotPassword",this.setState(e)}},{key:"resetPassword",value:function(e){var t,a,n;e.preventDefault(),t=this.state.formData.email,O.a.User.requestPasswordReset(t).then(function(e){a.call()},function(e){n.call(null,e)})}},{key:"returnToSignIn",value:function(){var e=JSON.parse(JSON.stringify(this.state));e.selectedTab="signInOrSignUp",this.setState(e)}}]),t}(n.Component)),L=(a(310),a(313),a(315),a(371)),F=a(170),B=function(e){function t(e){var a;Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={user:k()||{},newTodo:"",newContent:"",todoList:[],visible:!1,InputShow:!1};var n=k();return n&&C.getByUser(n,function(e){var t=JSON.parse(JSON.stringify(a.state));t.todoList=e,a.setState(t)}),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=(L.a.Header,L.a.Footer),a=(L.a.Sider,L.a.Content,this.state.todoList.filter(function(e){return!e.deleted}).map(function(t,a){return s.a.createElement(F.a,{type:["top","bottom"],delay:300,leaveReverse:!0},s.a.createElement("li",{key:a},s.a.createElement(w,{todo:t,onToggle:e.toggle.bind(e),onDelete:e.delete.bind(e)})))}));return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"logo"},s.a.createElement("span",null,"Todo ",s.a.createElement("span",{className:"spanStyle"},"Lists"))),s.a.createElement("h2",null,this.state.user.username||"\u6211","\u7684\u5f85\u529e\u4e8b\u9879"),this.state.user.id?s.a.createElement(m.a,{className:"SignOutBtn",onClick:this.signOut.bind(this)},"\u767b\u51fa"):null,"  ",s.a.createElement("br",null),s.a.createElement("div",{className:"plus",onClick:this.showInput.bind(this)},"+"),s.a.createElement("div",{className:"inputWrapper"},!1===this.state.InputShow?null:s.a.createElement(p,{content:this.state.newTodo,contents:this.state.newContent,onSubmit:this.addTodo.bind(this),onChange:this.changeTitle.bind(this)})),s.a.createElement("ol",{className:"todoList"},a),s.a.createElement(t,{style:{marginBottom:40,backgroundColor:"#fff"}},s.a.createElement(m.a,{icon:"zhihu",href:"https://www.zhihu.com/people/chen-jun-kun/posts"},"Blog"),s.a.createElement(m.a,{icon:"github",href:"https://github.com/no1harm/react-todolist"},"GitHub")),this.state.user.id?null:s.a.createElement(J,{onSignUp:this.onSignUpOrSignIn.bind(this),onSignIn:this.onSignUpOrSignIn.bind(this)}))}},{key:"onSignUpOrSignIn",value:function(e){var t=JSON.parse(JSON.stringify(this.state));t.user=e,this.setState(t)}},{key:"signOut",value:function(){O.a.User.logOut();var e=JSON.parse(JSON.stringify(this.state));e.user={},this.setState(e)}},{key:"componentDidUpdate",value:function(){}},{key:"addTodo",value:function(e){var t=this,a={title:e.title,content:e.content,status:"",deleted:!1};C.create(a,function(e){a.id=e,t.state.todoList.push(a),t.setState({newTodo:"",newContent:"",todoList:t.state.todoList})},function(e){console.log(e)})}},{key:"changeTitle",value:function(e){var t=e.title,a=e.content;this.setState({newTodo:t,newContent:a,todoList:this.state.todoList})}},{key:"toggle",value:function(e,t){var a=this,n=t.status;t.status="completed"===t.status?"":"completed",C.update(t,function(){a.setState(a.state)},function(e){t.status=n,a.setState(a.state)})}},{key:"delete",value:function(e,t){var a=this;C.destroy(t.id,function(){t.deleted=!0,a.setState(a.state)})}},{key:"showInput",value:function(e){this.setState({InputShow:!this.state.InputShow})}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[174,2,1]]]);
//# sourceMappingURL=main.4348bbd1.chunk.js.map